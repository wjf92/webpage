{"version":3,"sources":["webpack:///static/js/12.5cfdad45e9183b9a2d44.js","webpack:///work_flow.vue?c5cc","webpack:///./src/components/Search/work_flow.vue?feb2*","webpack:///./src/components/Search/work_flow.vue?f1a6*","webpack:///./src/components/Search/work_flow.vue?930e*","webpack:///./src/components/Search/work_flow.vue?3047"],"names":["webpackJsonp","188","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_axios__","__WEBPACK_IMPORTED_MODULE_0_axios___default","n","__WEBPACK_IMPORTED_MODULE_1__libs_util__","191","exports","push","i","212","content","locals","214","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","stepData","title","describe","attrs","slot","ref","step","stepRules","on","Connection_Name","model","callback","$$v","$set","expression","_l","datalist","key","connection_name","minRows","maxRows","replace","staticStyle","handleSubmit","permissoncolums","query_info","delrecordList","per_pn","permisson_list","editInfodModal","query","computer_room","timer","export","del_apply","$event","staticRenderFns","79","injectStyle","ssrContext","Component"],"mappings":"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","file":"static/js/12.5cfdad45e9183b9a2d44.js","sourcesContent":["webpackJsonp([12],{\n\n/***/ 188:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__libs_util__ = __webpack_require__(2);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'work_flow',\n  props: ['msg'],\n  data: function data() {\n    var _this = this;\n\n    return {\n      stepData: {\n        title: 'Yearning SQL查询系统',\n        describe: '\\u6B22\\u8FCE\\u4F60\\uFF01 ' + sessionStorage.getItem('user')\n      },\n      step: {\n        remark: '',\n        timer: 1,\n        computer_room: '',\n        connection_name: '',\n        person: '',\n        export: '0'\n      },\n      stepList1: [{\n        title: '提交',\n        describe: '提交查询申请'\n      }, {\n        title: '审核',\n        describe: '等待审核结果'\n      }, {\n        title: '查询',\n        describe: '审核完毕，进入查询页面'\n      }],\n      stepRules: {\n        opinion: [{ required: true, message: '请填写查询说明', trigger: 'blur' }],\n        computer_room: [{\n          required: true,\n          message: '机房地址不得为空',\n          trigger: 'change'\n        }],\n        basename: [{\n          required: true,\n          message: '数据库名不得为空',\n          trigger: 'change'\n        }],\n        person: [{\n          required: true,\n          message: '审核人不得为空',\n          trigger: 'change'\n        }]\n      },\n      item: {},\n      personlist: [],\n      datalist: {\n        connection_name_list: [],\n        basenamelist: [],\n        sqllist: [],\n        computer_roomlist: __WEBPACK_IMPORTED_MODULE_1__libs_util__[\"a\" /* default */].computer_room\n      },\n      // from audit\n      query_info: [],\n      permissoncolums: [{\n        type: 'selection',\n        width: 60,\n        align: 'center'\n      }, {\n        title: '申请编号',\n        key: 'work_id'\n      }, {\n        title: '时间',\n        key: 'time'\n      }, {\n        title: '审批人',\n        key: 'audit'\n      }, {\n        title: '状态',\n        key: 'query_per',\n        width: 150,\n        render: function render(h, params) {\n          var row = params.row;\n          var color = '';\n          var text = '';\n          if (row.query_per === 2) {\n            color = 'blue';\n            text = '待审核';\n          } else if (row.query_per === 0) {\n            color = 'red';\n            text = '驳回';\n          } else if (row.query_per === 1) {\n            color = 'green';\n            text = '同意';\n          } else {\n            color = 'yellow';\n            text = '查询结束';\n          }\n          return h('Tag', {\n            props: {\n              type: 'dot',\n              color: color\n            }\n          }, text);\n        },\n        sortable: true,\n        filters: [{\n          label: '同意',\n          value: 1\n        }, {\n          label: '驳回',\n          value: 0\n        }, {\n          label: '待审核',\n          value: 2\n        }, {\n          label: '查询结束',\n          value: 3\n        }],\n        //            filterMultiple: false 禁止多选,\n        filterMethod: function filterMethod(value, row) {\n          if (value === 1) {\n            return row.query_per === 1;\n          } else if (value === 2) {\n            return row.query_per === 2;\n          } else if (value === 0) {\n            return row.query_per === 0;\n          } else if (value === 3) {\n            return row.query_per === 3;\n          }\n        }\n      }, {\n        title: '操作',\n        key: 'action',\n        width: 200,\n        align: 'center',\n        render: function render(h, params) {\n          return h('div', [h('Button', {\n            props: {\n              size: 'small',\n              type: 'text'\n            },\n            on: {\n              click: function click() {\n                _this.modalinfo(params.row);\n              }\n            }\n          }, '查看')]);\n        }\n      }],\n      per_pn: 1,\n      delrecord: [],\n      editInfodModal: false,\n      query: {}\n    };\n  },\n\n  methods: {\n    Connection_Name: function Connection_Name(val) {\n      this.datalist.connection_name_list = [];\n      this.datalist.basenamelist = [];\n      this.step.connection_name = '';\n      this.step.basename = '';\n      if (val) {\n        this.ScreenConnection(val);\n      }\n    },\n    ScreenConnection: function ScreenConnection(val) {\n      this.datalist.connection_name_list = this.item.filter(function (item) {\n        if (item.computer_room === val) {\n          return item;\n        }\n      });\n    },\n    handleSubmit: function handleSubmit() {\n      var _this2 = this;\n\n      this.$refs['step'].validate(function (valid) {\n        if (valid) {\n          __WEBPACK_IMPORTED_MODULE_0_axios___default.a.put(__WEBPACK_IMPORTED_MODULE_1__libs_util__[\"a\" /* default */].url + '/query_worklf', {\n            'mode': 'put',\n            'instructions': _this2.step.opinion,\n            'timer': _this2.step.timer,\n            'connection_name': _this2.step.connection_name,\n            'computer_room': _this2.step.computer_room,\n            'export': _this2.step.export,\n            'audit': _this2.step.person\n          }).then(function () {\n            _this2.$router.push({\n              name: 'queryready'\n            });\n          });\n        }\n      });\n    },\n\n    // from audit\n    permisson_list: function permisson_list() {\n      var _this3 = this;\n\n      var vl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      __WEBPACK_IMPORTED_MODULE_0_axios___default.a.get(__WEBPACK_IMPORTED_MODULE_1__libs_util__[\"a\" /* default */].url + '/query_order?page=' + vl + '&type=myorder').then(function (res) {\n        _this3.query_info = res.data['data'];\n        _this3.per_pn = res.data['pn'];\n      }).catch(function (error) {\n        __WEBPACK_IMPORTED_MODULE_1__libs_util__[\"a\" /* default */].err_notice(error);\n      });\n    },\n    delrecordData: function delrecordData() {\n      var _this4 = this;\n\n      __WEBPACK_IMPORTED_MODULE_0_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_1__libs_util__[\"a\" /* default */].url + '/query_order/', { 'work_id': JSON.stringify(this.delrecord) }).then(function (res) {\n        __WEBPACK_IMPORTED_MODULE_1__libs_util__[\"a\" /* default */].notice(res.data);\n        _this4.$refs.perpage.currentPage = 1;\n        _this4.permisson_list();\n      }).catch(function (error) {\n        __WEBPACK_IMPORTED_MODULE_1__libs_util__[\"a\" /* default */].err_notice(error);\n      });\n    },\n    delrecordList: function delrecordList(vl) {\n      this.delrecord = vl.map(function (vl) {\n        return vl.work_id;\n      });\n    },\n    modalinfo: function modalinfo(vl) {\n      this.editInfodModal = true;\n      this.query = vl;\n    },\n    del_apply: function del_apply() {\n      var _this5 = this;\n\n      __WEBPACK_IMPORTED_MODULE_0_axios___default.a.delete(__WEBPACK_IMPORTED_MODULE_1__libs_util__[\"a\" /* default */].url + '/query_worklf').then(function () {\n        _this5.$router.push({\n          name: 'serach-sql'\n        });\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this6 = this;\n\n    __WEBPACK_IMPORTED_MODULE_0_axios___default.a.put(__WEBPACK_IMPORTED_MODULE_1__libs_util__[\"a\" /* default */].url + '/workorder/connection', { 'permissions_type': 'query' }).then(function (res) {\n      _this6.item = res.data['connection'];\n      _this6.personlist = res.data['assigend'];\n      _this6.datalist.computer_roomlist = res.data['custom'];\n    }).catch(function (error) {\n      __WEBPACK_IMPORTED_MODULE_1__libs_util__[\"a\" /* default */].err_notice(error);\n    });\n    /*      axios.put(`${util.url}/query_worklf`, {'mode': 'status'})\n            .then(res => {\n              if (res.data === 1) {\n                this.$router.push({\n                  name: 'querypage'\n                })\n              } else if (res.data === 2) {\n                this.$router.push({\n                  name: 'queryready'\n                })\n              }\n            }) */\n    // from audit\n    this.permisson_list();\n  }\n});\n\n/***/ }),\n\n/***/ 191:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(77)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".step-header-con{text-align:center}.step-header-con h3{margin:10px 0}.step-header-con h5{margin:0 0 5px}.step-content{padding:5px 20px 26px}.step-content,.step-form{margin-bottom:20px;border-bottom:1px solid #dbdddf}.step-form{padding-bottom:10px}\", \"\", {\"version\":3,\"sources\":[\"/Data/projects/yearning_1.2/webpage/src/components/Search/work_flow.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,iBAAmB,CACpB,AACD,oBACE,aAAe,CAChB,AACD,oBACE,cAAgB,CACjB,AACD,cACE,qBAAuB,CAGxB,AACD,yBAHE,mBAAoB,AACpB,+BAAiC,CAMlC,AAJD,WACE,mBAAqB,CAGtB\",\"file\":\"work_flow.vue\",\"sourcesContent\":[\"\\n.step-header-con {\\n  text-align: center;\\n}\\n.step-header-con h3 {\\n  margin: 10px 0;\\n}\\n.step-header-con h5 {\\n  margin: 0 0 5px;\\n}\\n.step-content {\\n  padding: 5px 20px 26px;\\n  margin-bottom: 20px;\\n  border-bottom: 1px solid #dbdddf;\\n}\\n.step-form {\\n  padding-bottom: 10px;\\n  border-bottom: 1px solid #dbdddf;\\n  margin-bottom: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 212:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(191);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(78)(\"51de479c\", content, true, {});\n\n/***/ }),\n\n/***/ 214:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('Row', [_c('Card', [_c('div', {\n    staticClass: \"step-header-con\"\n  }, [_c('h3', [_vm._v(_vm._s(_vm.stepData.title))]), _vm._v(\" \"), _c('h5', [_vm._v(_vm._s(_vm.stepData.describe))])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"step-content\"\n  }), _vm._v(\" \"), _c('Row', [_c('i-col', {\n    attrs: {\n      \"span\": \"8\"\n    }\n  }, [_c('Alert', {\n    attrs: {\n      \"type\": \"warning\",\n      \"show-icon\": \"\"\n    }\n  }, [_vm._v(\"\\n              注意事项:\\n              \"), _c('span', {\n    attrs: {\n      \"slot\": \"desc\"\n    },\n    slot: \"desc\"\n  }, [_vm._v(\"\\n              1.必须填写查询说明\\n              \"), _c('br'), _vm._v(\"\\n              2.根据查询条件预估所需的查询时间\\n              \"), _c('br'), _vm._v(\"\\n              3.所有提交的查询语句均会进行审计记录\\n              \"), _c('br'), _vm._v(\"\\n              4.仅支持select语句,不可使用非查询语句\\n              \"), _c('br'), _vm._v(\"\\n              5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则已平台配置的Limit数为准\\n            \")])])], 1), _vm._v(\" \"), _c('i-col', {\n    attrs: {\n      \"span\": \"12\"\n    }\n  }, [_c('Form', {\n    ref: \"step\",\n    attrs: {\n      \"model\": _vm.step,\n      \"rules\": _vm.stepRules,\n      \"label-width\": 150\n    }\n  }, [_c('FormItem', {\n    attrs: {\n      \"label\": \"机房:\",\n      \"prop\": \"computer_room\"\n    }\n  }, [_c('Select', {\n    on: {\n      \"on-change\": _vm.Connection_Name\n    },\n    model: {\n      value: (_vm.step.computer_room),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"computer_room\", $$v)\n      },\n      expression: \"step.computer_room\"\n    }\n  }, _vm._l((_vm.datalist.computer_roomlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"连接名:\",\n      \"prop\": \"connection_name\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\",\n      \"multiple\": \"\"\n    },\n    model: {\n      value: (_vm.step.connection_name),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"connection_name\", $$v)\n      },\n      expression: \"step.connection_name\"\n    }\n  }, _vm._l((_vm.datalist.connection_name_list), function(i) {\n    return _c('Option', {\n      key: i.connection_name,\n      attrs: {\n        \"value\": i.connection_name\n      }\n    }, [_vm._v(_vm._s(i.connection_name) + \"\\n                  \")])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"审核人:\",\n      \"prop\": \"person\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\"\n    },\n    model: {\n      value: (_vm.step.person),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"person\", $$v)\n      },\n      expression: \"step.person\"\n    }\n  }, _vm._l((_vm.personlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"是否需要导出数据:\",\n      \"prop\": \"export\"\n    }\n  }, [_c('RadioGroup', {\n    model: {\n      value: (_vm.step.export),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"export\", $$v)\n      },\n      expression: \"step.export\"\n    }\n  }, [_c('Radio', {\n    attrs: {\n      \"label\": \"1\"\n    }\n  }, [_vm._v(\"是\")]), _vm._v(\" \"), _c('Radio', {\n    attrs: {\n      \"label\": \"0\"\n    }\n  }, [_vm._v(\"否\")])], 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询说明：\",\n      \"prop\": \"opinion\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"type\": \"textarea\",\n      \"autosize\": {\n        minRows: 4,\n        maxRows: 8\n      },\n      \"placeholder\": \"请填写查询说明\"\n    },\n    model: {\n      value: (_vm.step.opinion),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"opinion\", $$v)\n      },\n      expression: \"step.opinion\"\n    }\n  })], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询时限：\"\n    }\n  }, [_c('InputNumber', {\n    attrs: {\n      \"formatter\": function (value) { return (value + \"小时\"); },\n      \"parser\": function (value) { return value.replace('小时', ''); },\n      \"min\": 1\n    },\n    model: {\n      value: (_vm.step.timer),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"timer\", $$v)\n      },\n      expression: \"step.timer\"\n    }\n  }), _vm._v(\" \"), _c('a', [_vm._v(\"(1-168小时,最长申请7天)\")])], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('Button', {\n    staticStyle: {\n      \"width\": \"100px\"\n    },\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.handleSubmit\n    }\n  }, [_vm._v(\"提交\")])], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('Row', [_c('Card', [_c('p', {\n    attrs: {\n      \"slot\": \"title\"\n    },\n    slot: \"title\"\n  }, [_c('Icon', {\n    attrs: {\n      \"type\": \"person\"\n    }\n  }), _vm._v(\"\\n              我的申请\\n            \")], 1), _vm._v(\" \"), _c('Row', [_c('Col', {\n    attrs: {\n      \"span\": \"24\"\n    }\n  }, [_c('Table', {\n    ref: \"selection\",\n    attrs: {\n      \"border\": \"\",\n      \"columns\": _vm.permissoncolums,\n      \"data\": _vm.query_info,\n      \"stripe\": \"\"\n    },\n    on: {\n      \"on-selection-change\": _vm.delrecordList\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('Page', {\n    ref: \"perpage\",\n    attrs: {\n      \"total\": _vm.per_pn,\n      \"show-elevator\": \"\",\n      \"page-size\": 5\n    },\n    on: {\n      \"on-change\": _vm.permisson_list\n    }\n  })], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('Modal', {\n    attrs: {\n      \"width\": 800\n    },\n    model: {\n      value: (_vm.editInfodModal),\n      callback: function($$v) {\n        _vm.editInfodModal = $$v\n      },\n      expression: \"editInfodModal\"\n    }\n  }, [_c('h3', {\n    staticStyle: {\n      \"color\": \"#2D8CF0\"\n    },\n    attrs: {\n      \"slot\": \"header\"\n    },\n    slot: \"header\"\n  }, [_vm._v(\"查询申请单详细内容\")]), _vm._v(\" \"), _c('Form', {\n    attrs: {\n      \"label-width\": 120,\n      \"label-position\": \"right\"\n    }\n  }, [_c('FormItem', {\n    attrs: {\n      \"label\": \"机房\"\n    }\n  }, [_c('p', [_vm._v(_vm._s(_vm.query.computer_room))])]), _vm._v(\" \"), _c('hr', {\n    staticStyle: {\n      \"height\": \"1px\",\n      \"border\": \"none\",\n      \"border-top\": \"1px dashed #dddee1\"\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"连接名:\"\n    }\n  }, [_c('p', [_vm._v(_vm._s(_vm.query.connection_name))])]), _vm._v(\" \"), _c('hr', {\n    staticStyle: {\n      \"height\": \"1px\",\n      \"border\": \"none\",\n      \"border-top\": \"1px dashed #dddee1\"\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询时限:\"\n    }\n  }, [_c('p', [_vm._v(_vm._s(_vm.query.timer) + \"小时\")])]), _vm._v(\" \"), _c('hr', {\n    staticStyle: {\n      \"height\": \"1px\",\n      \"border\": \"none\",\n      \"border-top\": \"1px dashed #dddee1\"\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"导出数据:\"\n    }\n  }, [(_vm.query.export === 1) ? _c('p', [_vm._v(\"是\")]) : _c('p', [_vm._v(\"否\")])]), _vm._v(\" \"), _c('hr', {\n    staticStyle: {\n      \"height\": \"1px\",\n      \"border\": \"none\",\n      \"border-top\": \"1px dashed #dddee1\"\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询说明:\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"type\": \"textarea\",\n      \"autosize\": {\n        minRows: 5,\n        maxRows: 8\n      },\n      \"readonly\": \"\"\n    },\n    model: {\n      value: (_vm.query.instructions),\n      callback: function($$v) {\n        _vm.$set(_vm.query, \"instructions\", $$v)\n      },\n      expression: \"query.instructions\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"slot\": \"footer\"\n    },\n    slot: \"footer\"\n  }, [_c('Button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.del_apply\n    }\n  }, [_vm._v(\"撤销\")]), _vm._v(\" \"), _c('Button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.editInfodModal = false\n      }\n    }\n  }, [_vm._v(\"返回\")])], 1)], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 79:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(212)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(188),\n  /* template */\n  __webpack_require__(214),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/12.5cfdad45e9183b9a2d44.js","<template>\n  <div>\n    <Row>\n      <Card>\n        <div class=\"step-header-con\">\n          <h3>{{ stepData.title }}</h3>\n          <h5>{{ stepData.describe }}</h5>\n        </div>\n        <p class=\"step-content\"></p>\n        <Row>\n          <i-col span=\"8\">\n            <Alert type=\"warning\" show-icon>\n              注意事项:\n              <span slot=\"desc\">\n              1.必须填写查询说明\n              <br>\n              2.根据查询条件预估所需的查询时间\n              <br>\n              3.所有提交的查询语句均会进行审计记录\n              <br>\n              4.仅支持select语句,不可使用非查询语句\n              <br>\n              5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则已平台配置的Limit数为准\n            </span>\n            </Alert>\n          </i-col>\n          <i-col span=\"12\">\n            <Form ref=\"step\" :model=\"step\" :rules=\"stepRules\" :label-width=\"150\">\n              <FormItem label=\"机房:\" prop=\"computer_room\">\n                <Select v-model=\"step.computer_room\" @on-change=\"Connection_Name\">\n                  <Option v-for=\"i in datalist.computer_roomlist\" :key=\"i\" :value=\"i\">{{i}}</Option>\n                </Select>\n              </FormItem>\n\n              <FormItem label=\"连接名:\" prop=\"connection_name\">\n                <Select v-model=\"step.connection_name\" filterable multiple>\n                  <Option v-for=\"i in datalist.connection_name_list\" :value=\"i.connection_name\"\n                          :key=\"i.connection_name\">{{ i.connection_name }}\n                  </Option>\n                </Select>\n              </FormItem>\n              <FormItem label=\"审核人:\" prop=\"person\">\n                <Select v-model=\"step.person\" filterable>\n                  <Option v-for=\"i in personlist\" :value=\"i\" :key=\"i\">{{ i }}</Option>\n                </Select>\n              </FormItem>\n              <FormItem label=\"是否需要导出数据:\" prop=\"export\">\n                <RadioGroup v-model=\"step.export\">\n                  <Radio label=\"1\">是</Radio>\n                  <Radio label=\"0\">否</Radio>\n                </RadioGroup>\n              </FormItem>\n              <FormItem label=\"查询说明：\" prop=\"opinion\">\n                <Input v-model=\"step.opinion\" type=\"textarea\" :autosize=\"{minRows: 4,maxRows: 8}\"\n                       placeholder=\"请填写查询说明\"/>\n              </FormItem>\n              <FormItem label=\"查询时限：\">\n                <InputNumber\n                  v-model=\"step.timer\"\n                  :formatter=\"value => `${value}小时`\"\n                  :parser=\"value => value.replace('小时', '')\"\n                  :min=\"1\">\n                </InputNumber>\n                 <a>(1-168小时,最长申请7天)</a>\n              </FormItem>\n              <FormItem label=\"\">\n                <Button @click=\"handleSubmit\" style=\"width:100px;\" type=\"primary\">提交</Button>\n              </FormItem>\n            </Form>\n          </i-col>\n        </Row>\n<!--        <Steps style=\"margin-left: 10%\">\n          <Step v-for=\"item in stepList1\" :title=\"item.title\" :content=\"item.describe\" :key=\"item.title\"></Step>\n        </Steps>-->\n        <Row>\n          <Card>\n            <p slot=\"title\">\n              <Icon type=\"person\"></Icon>\n              我的申请\n            </p>\n            <Row>\n              <Col span=\"24\">\n                <Table border :columns=\"permissoncolums\" :data=\"query_info\" stripe ref=\"selection\"\n                       @on-selection-change=\"delrecordList\"></Table>\n                <br>\n                <Page :total=\"per_pn\" show-elevator @on-change=\"permisson_list\" :page-size=\"5\" ref=\"perpage\"></Page>\n              </Col>\n            </Row>\n          </Card>\n        </Row>\n\n        <Modal v-model=\"editInfodModal\" :width=\"800\">\n          <h3 slot=\"header\" style=\"color:#2D8CF0\">查询申请单详细内容</h3>\n          <Form :label-width=\"120\" label-position=\"right\">\n            <FormItem label=\"机房\">\n              <p>{{query.computer_room}}</p>\n            </FormItem>\n            <hr style=\"height:1px;border:none;border-top:1px dashed #dddee1;\"/>\n            <br>\n            <FormItem label=\"连接名:\">\n              <p>{{query.connection_name}}</p>\n            </FormItem>\n            <hr style=\"height:1px;border:none;border-top:1px dashed #dddee1;\"/>\n            <br>\n            <FormItem label=\"查询时限:\">\n              <p>{{query.timer}}小时</p>\n            </FormItem>\n            <hr style=\"height:1px;border:none;border-top:1px dashed #dddee1;\"/>\n            <br>\n            <FormItem label=\"导出数据:\">\n              <p v-if=\"query.export === 1\">是</p>\n              <p v-else>否</p>\n            </FormItem>\n            <hr style=\"height:1px;border:none;border-top:1px dashed #dddee1;\"/>\n            <br>\n            <FormItem label=\"查询说明:\">\n              <Input v-model=\"query.instructions\" type=\"textarea\" :autosize=\"{minRows: 5,maxRows: 8}\" readonly></Input>\n            </FormItem>\n          </Form>\n          <div slot=\"footer\">\n            <Button type=\"primary\" @click=\"del_apply\">撤销</Button>\n            <Button type=\"primary\" @click=\"editInfodModal=false\">返回</Button>\n          </div>\n        </Modal>\n\n      </Card>\n    </Row>\n  </div>\n</template>\n\n<script>\n  //\n  import axios from 'axios'\n  import util from '../../libs/util'\n\n  export default {\n    name: 'work_flow',\n    props: ['msg'],\n    data () {\n      return {\n        stepData: {\n          title: 'Yearning SQL查询系统',\n          describe: `欢迎你！ ${sessionStorage.getItem('user')}`\n        },\n        step: {\n          remark: '',\n          timer: 1,\n          computer_room: '',\n          connection_name: '',\n          person: '',\n          export: '0'\n        },\n        stepList1: [\n          {\n            title: '提交',\n            describe: '提交查询申请'\n          },\n          {\n            title: '审核',\n            describe: '等待审核结果'\n          },\n          {\n            title: '查询',\n            describe: '审核完毕，进入查询页面'\n          }\n        ],\n        stepRules: {\n          opinion: [\n            {required: true, message: '请填写查询说明', trigger: 'blur'}\n          ],\n          computer_room: [{\n            required: true,\n            message: '机房地址不得为空',\n            trigger: 'change'\n          }],\n          basename: [{\n            required: true,\n            message: '数据库名不得为空',\n            trigger: 'change'\n          }],\n          person: [{\n            required: true,\n            message: '审核人不得为空',\n            trigger: 'change'\n          }]\n        },\n        item: {},\n        personlist: [],\n        datalist: {\n          connection_name_list: [],\n          basenamelist: [],\n          sqllist: [],\n          computer_roomlist: util.computer_room\n        },\n        // from audit\n        query_info: [],\n        permissoncolums: [\n          {\n            type: 'selection',\n            width: 60,\n            align: 'center'\n          },\n          {\n            title: '申请编号',\n            key: 'work_id'\n          },\n          {\n            title: '时间',\n            key: 'time'\n          },\n          {\n            title: '审批人',\n            key: 'audit'\n          },\n          {\n            title: '状态',\n            key: 'query_per',\n            width: 150,\n            render: (h, params) => {\n              const row = params.row\n              let color = ''\n              let text = ''\n              if (row.query_per === 2) {\n                color = 'blue'\n                text = '待审核'\n              } else if (row.query_per === 0) {\n                color = 'red'\n                text = '驳回'\n              } else if (row.query_per === 1) {\n                color = 'green'\n                text = '同意'\n              } else {\n                color = 'yellow'\n                text = '查询结束'\n              }\n              return h('Tag', {\n                props: {\n                  type: 'dot',\n                  color: color\n                }\n              }, text)\n            },\n            sortable: true,\n            filters: [{\n              label: '同意',\n              value: 1\n            },\n              {\n                label: '驳回',\n                value: 0\n              },\n              {\n                label: '待审核',\n                value: 2\n              },\n              {\n                label: '查询结束',\n                value: 3\n              }\n            ],\n            //            filterMultiple: false 禁止多选,\n            filterMethod (value, row) {\n              if (value === 1) {\n                return row.query_per === 1\n              } else if (value === 2) {\n                return row.query_per === 2\n              } else if (value === 0) {\n                return row.query_per === 0\n              } else if (value === 3) {\n                return row.query_per === 3\n              }\n            }\n          },\n          {\n            title: '操作',\n            key: 'action',\n            width: 200,\n            align: 'center',\n            render: (h, params) => {\n              return h('div', [\n                h('Button', {\n                  props: {\n                    size: 'small',\n                    type: 'text'\n                  },\n                  on: {\n                    click: () => {\n                      this.modalinfo(params.row)\n                    }\n                  }\n                }, '查看')\n              ])\n            }\n          }\n        ],\n        per_pn: 1,\n        delrecord: [],\n        editInfodModal: false,\n        query: {}\n      }\n    },\n    methods: {\n      Connection_Name (val) {\n        this.datalist.connection_name_list = []\n        this.datalist.basenamelist = []\n        this.step.connection_name = ''\n        this.step.basename = ''\n        if (val) {\n          this.ScreenConnection(val)\n        }\n      },\n      ScreenConnection (val) {\n        this.datalist.connection_name_list = this.item.filter(item => {\n          if (item.computer_room === val) {\n            return item\n          }\n        })\n      },\n      handleSubmit () {\n        this.$refs['step'].validate((valid) => {\n          if (valid) {\n            axios.put(`${util.url}/query_worklf`, {\n              'mode': 'put',\n              'instructions': this.step.opinion,\n              'timer': this.step.timer,\n              'connection_name': this.step.connection_name,\n              'computer_room': this.step.computer_room,\n              'export': this.step.export,\n              'audit': this.step.person\n            })\n              .then(() => {\n                this.$router.push({\n                  name: 'queryready'\n                })\n              })\n          }\n        })\n      },\n      // from audit\n      permisson_list (vl = 1) {\n        axios.get(`${util.url}/query_order?page=${vl}&type=myorder`)\n          .then(res => {\n            this.query_info = res.data['data']\n            this.per_pn = res.data['pn']\n          })\n          .catch(error => {\n            util.err_notice(error)\n          })\n      },\n      delrecordData () {\n        axios.post(`${util.url}/query_order/`, {'work_id': JSON.stringify(this.delrecord)})\n          .then(res => {\n            util.notice(res.data)\n            this.$refs.perpage.currentPage = 1\n            this.permisson_list()\n          })\n          .catch(error => {\n            util.err_notice(error)\n          })\n      },\n      delrecordList (vl) {\n        this.delrecord = vl.map(vl => vl.work_id)\n      },\n      modalinfo (vl) {\n        this.editInfodModal = true\n        this.query = vl\n      },\n      del_apply () {\n        axios.delete(`${util.url}/query_worklf`)\n          .then(() => {\n            this.$router.push({\n              name: 'serach-sql'\n            })\n          })\n      }\n    },\n    mounted () {\n      axios.put(`${util.url}/workorder/connection`, {'permissions_type': 'query'})\n        .then(res => {\n          this.item = res.data['connection']\n          this.personlist = res.data['assigend']\n          this.datalist.computer_roomlist = res.data['custom']\n        })\n        .catch(error => {\n          util.err_notice(error)\n        })\n/*      axios.put(`${util.url}/query_worklf`, {'mode': 'status'})\n        .then(res => {\n          if (res.data === 1) {\n            this.$router.push({\n              name: 'querypage'\n            })\n          } else if (res.data === 2) {\n            this.$router.push({\n              name: 'queryready'\n            })\n          }\n        }) */\n        // from audit\n      this.permisson_list()\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  .step {\n    &-header-con {\n      text-align: center;\n      h3 {\n        margin: 10px 0;\n      }\n      h5 {\n        margin: 0 0 5px;\n      }\n    }\n    &-content {\n      padding: 5px 20px 26px;\n      margin-bottom: 20px;\n      border-bottom: 1px solid #dbdddf;\n    }\n    &-form {\n      padding-bottom: 10px;\n      border-bottom: 1px solid #dbdddf;\n      margin-bottom: 20px;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// work_flow.vue?75c993f9","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".step-header-con{text-align:center}.step-header-con h3{margin:10px 0}.step-header-con h5{margin:0 0 5px}.step-content{padding:5px 20px 26px}.step-content,.step-form{margin-bottom:20px;border-bottom:1px solid #dbdddf}.step-form{padding-bottom:10px}\", \"\", {\"version\":3,\"sources\":[\"/Data/projects/yearning_1.2/webpage/src/components/Search/work_flow.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,iBAAmB,CACpB,AACD,oBACE,aAAe,CAChB,AACD,oBACE,cAAgB,CACjB,AACD,cACE,qBAAuB,CAGxB,AACD,yBAHE,mBAAoB,AACpB,+BAAiC,CAMlC,AAJD,WACE,mBAAqB,CAGtB\",\"file\":\"work_flow.vue\",\"sourcesContent\":[\"\\n.step-header-con {\\n  text-align: center;\\n}\\n.step-header-con h3 {\\n  margin: 10px 0;\\n}\\n.step-header-con h5 {\\n  margin: 0 0 5px;\\n}\\n.step-content {\\n  padding: 5px 20px 26px;\\n  margin-bottom: 20px;\\n  border-bottom: 1px solid #dbdddf;\\n}\\n.step-form {\\n  padding-bottom: 10px;\\n  border-bottom: 1px solid #dbdddf;\\n  margin-bottom: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0edcd179\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Search/work_flow.vue\n// module id = 191\n// module chunks = 0 12","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0edcd179\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/less-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./work_flow.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"51de479c\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0edcd179\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Search/work_flow.vue\n// module id = 212\n// module chunks = 0 12","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('Row', [_c('Card', [_c('div', {\n    staticClass: \"step-header-con\"\n  }, [_c('h3', [_vm._v(_vm._s(_vm.stepData.title))]), _vm._v(\" \"), _c('h5', [_vm._v(_vm._s(_vm.stepData.describe))])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"step-content\"\n  }), _vm._v(\" \"), _c('Row', [_c('i-col', {\n    attrs: {\n      \"span\": \"8\"\n    }\n  }, [_c('Alert', {\n    attrs: {\n      \"type\": \"warning\",\n      \"show-icon\": \"\"\n    }\n  }, [_vm._v(\"\\n              注意事项:\\n              \"), _c('span', {\n    attrs: {\n      \"slot\": \"desc\"\n    },\n    slot: \"desc\"\n  }, [_vm._v(\"\\n              1.必须填写查询说明\\n              \"), _c('br'), _vm._v(\"\\n              2.根据查询条件预估所需的查询时间\\n              \"), _c('br'), _vm._v(\"\\n              3.所有提交的查询语句均会进行审计记录\\n              \"), _c('br'), _vm._v(\"\\n              4.仅支持select语句,不可使用非查询语句\\n              \"), _c('br'), _vm._v(\"\\n              5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则已平台配置的Limit数为准\\n            \")])])], 1), _vm._v(\" \"), _c('i-col', {\n    attrs: {\n      \"span\": \"12\"\n    }\n  }, [_c('Form', {\n    ref: \"step\",\n    attrs: {\n      \"model\": _vm.step,\n      \"rules\": _vm.stepRules,\n      \"label-width\": 150\n    }\n  }, [_c('FormItem', {\n    attrs: {\n      \"label\": \"机房:\",\n      \"prop\": \"computer_room\"\n    }\n  }, [_c('Select', {\n    on: {\n      \"on-change\": _vm.Connection_Name\n    },\n    model: {\n      value: (_vm.step.computer_room),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"computer_room\", $$v)\n      },\n      expression: \"step.computer_room\"\n    }\n  }, _vm._l((_vm.datalist.computer_roomlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"连接名:\",\n      \"prop\": \"connection_name\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\",\n      \"multiple\": \"\"\n    },\n    model: {\n      value: (_vm.step.connection_name),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"connection_name\", $$v)\n      },\n      expression: \"step.connection_name\"\n    }\n  }, _vm._l((_vm.datalist.connection_name_list), function(i) {\n    return _c('Option', {\n      key: i.connection_name,\n      attrs: {\n        \"value\": i.connection_name\n      }\n    }, [_vm._v(_vm._s(i.connection_name) + \"\\n                  \")])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"审核人:\",\n      \"prop\": \"person\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\"\n    },\n    model: {\n      value: (_vm.step.person),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"person\", $$v)\n      },\n      expression: \"step.person\"\n    }\n  }, _vm._l((_vm.personlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"是否需要导出数据:\",\n      \"prop\": \"export\"\n    }\n  }, [_c('RadioGroup', {\n    model: {\n      value: (_vm.step.export),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"export\", $$v)\n      },\n      expression: \"step.export\"\n    }\n  }, [_c('Radio', {\n    attrs: {\n      \"label\": \"1\"\n    }\n  }, [_vm._v(\"是\")]), _vm._v(\" \"), _c('Radio', {\n    attrs: {\n      \"label\": \"0\"\n    }\n  }, [_vm._v(\"否\")])], 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询说明：\",\n      \"prop\": \"opinion\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"type\": \"textarea\",\n      \"autosize\": {\n        minRows: 4,\n        maxRows: 8\n      },\n      \"placeholder\": \"请填写查询说明\"\n    },\n    model: {\n      value: (_vm.step.opinion),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"opinion\", $$v)\n      },\n      expression: \"step.opinion\"\n    }\n  })], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询时限：\"\n    }\n  }, [_c('InputNumber', {\n    attrs: {\n      \"formatter\": function (value) { return (value + \"小时\"); },\n      \"parser\": function (value) { return value.replace('小时', ''); },\n      \"min\": 1\n    },\n    model: {\n      value: (_vm.step.timer),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"timer\", $$v)\n      },\n      expression: \"step.timer\"\n    }\n  }), _vm._v(\" \"), _c('a', [_vm._v(\"(1-168小时,最长申请7天)\")])], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('Button', {\n    staticStyle: {\n      \"width\": \"100px\"\n    },\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.handleSubmit\n    }\n  }, [_vm._v(\"提交\")])], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('Row', [_c('Card', [_c('p', {\n    attrs: {\n      \"slot\": \"title\"\n    },\n    slot: \"title\"\n  }, [_c('Icon', {\n    attrs: {\n      \"type\": \"person\"\n    }\n  }), _vm._v(\"\\n              我的申请\\n            \")], 1), _vm._v(\" \"), _c('Row', [_c('Col', {\n    attrs: {\n      \"span\": \"24\"\n    }\n  }, [_c('Table', {\n    ref: \"selection\",\n    attrs: {\n      \"border\": \"\",\n      \"columns\": _vm.permissoncolums,\n      \"data\": _vm.query_info,\n      \"stripe\": \"\"\n    },\n    on: {\n      \"on-selection-change\": _vm.delrecordList\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('Page', {\n    ref: \"perpage\",\n    attrs: {\n      \"total\": _vm.per_pn,\n      \"show-elevator\": \"\",\n      \"page-size\": 5\n    },\n    on: {\n      \"on-change\": _vm.permisson_list\n    }\n  })], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('Modal', {\n    attrs: {\n      \"width\": 800\n    },\n    model: {\n      value: (_vm.editInfodModal),\n      callback: function($$v) {\n        _vm.editInfodModal = $$v\n      },\n      expression: \"editInfodModal\"\n    }\n  }, [_c('h3', {\n    staticStyle: {\n      \"color\": \"#2D8CF0\"\n    },\n    attrs: {\n      \"slot\": \"header\"\n    },\n    slot: \"header\"\n  }, [_vm._v(\"查询申请单详细内容\")]), _vm._v(\" \"), _c('Form', {\n    attrs: {\n      \"label-width\": 120,\n      \"label-position\": \"right\"\n    }\n  }, [_c('FormItem', {\n    attrs: {\n      \"label\": \"机房\"\n    }\n  }, [_c('p', [_vm._v(_vm._s(_vm.query.computer_room))])]), _vm._v(\" \"), _c('hr', {\n    staticStyle: {\n      \"height\": \"1px\",\n      \"border\": \"none\",\n      \"border-top\": \"1px dashed #dddee1\"\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"连接名:\"\n    }\n  }, [_c('p', [_vm._v(_vm._s(_vm.query.connection_name))])]), _vm._v(\" \"), _c('hr', {\n    staticStyle: {\n      \"height\": \"1px\",\n      \"border\": \"none\",\n      \"border-top\": \"1px dashed #dddee1\"\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询时限:\"\n    }\n  }, [_c('p', [_vm._v(_vm._s(_vm.query.timer) + \"小时\")])]), _vm._v(\" \"), _c('hr', {\n    staticStyle: {\n      \"height\": \"1px\",\n      \"border\": \"none\",\n      \"border-top\": \"1px dashed #dddee1\"\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"导出数据:\"\n    }\n  }, [(_vm.query.export === 1) ? _c('p', [_vm._v(\"是\")]) : _c('p', [_vm._v(\"否\")])]), _vm._v(\" \"), _c('hr', {\n    staticStyle: {\n      \"height\": \"1px\",\n      \"border\": \"none\",\n      \"border-top\": \"1px dashed #dddee1\"\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询说明:\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"type\": \"textarea\",\n      \"autosize\": {\n        minRows: 5,\n        maxRows: 8\n      },\n      \"readonly\": \"\"\n    },\n    model: {\n      value: (_vm.query.instructions),\n      callback: function($$v) {\n        _vm.$set(_vm.query, \"instructions\", $$v)\n      },\n      expression: \"query.instructions\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"slot\": \"footer\"\n    },\n    slot: \"footer\"\n  }, [_c('Button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.del_apply\n    }\n  }, [_vm._v(\"撤销\")]), _vm._v(\" \"), _c('Button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.editInfodModal = false\n      }\n    }\n  }, [_vm._v(\"返回\")])], 1)], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-0edcd179\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Search/work_flow.vue\n// module id = 214\n// module chunks = 0 12","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0edcd179\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./work_flow.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./work_flow.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0edcd179\\\",\\\"hasScoped\\\":false}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./work_flow.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Search/work_flow.vue\n// module id = 79\n// module chunks = 0 12"],"sourceRoot":""}